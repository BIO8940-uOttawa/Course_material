{
  "hash": "419a5e66fc58958122f28990548971a1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"How do we build a model?\"\nsubtitle: Variable selection and causality\nauthor: Julien Martin\ninstitute: BIO 8940 - Lecture 5\ndate: today\nformat:\n  revealjs: \n    code-block-background: false\n    width: 1600\n    height: 950\n    chalkboard: true\n    theme: [default]\n    css: [assets/theme_chalk/whiteboard-blue.css]\n#    output-location: column-fragment\n#    logo: assets/MAD_logo_small_rb.png\n    footer: BIO 8940 - Lecture 5\n    show-notes: false\n    output-ext: notes.html\n  html:\n    self-contained: true\n    number-sections: true\n    code-link: true\n    format-links: false\n    css: assets/css/notes.css\n    number-depth: 2\n    comments:\n      hypothesis: true\n    output-ext: slides.html\neditor:\n  render-on-save: true\n---\n\n\n# Why to we build models?\n\n\n\n\n::: {.cell layout-align=\"center\"}\n<style type=\"text/css\">\n.desc {\n font-weight: bold;\n font-style: italic;\n font-size: 1.2em;\n color: blue;\n}\n.caus {\n font-weight: bold;\n font-style: italic;\n font-size: 1.2em;\n color: red;\n}\n.pred {\n font-weight: bold;\n font-style: italic;\n font-size: 1.2em;\n color: purple;\n}\n</style>\n:::\n\n\n## Data generating process\n\n![](assets/img_l5/black-box-general.png){fig-align=\"center\"}\n\n\n## Interpreting relationships in data\n\n- When we say there's a relationship between two variables... how do we interpret that?\n\n- What precisely do we mean?\n\n- What do we want to do with this information?\n\n## Distinguishing goals of data analysis\n\n[Descriptive]{.desc}: Document or quantify observed relationships between inputs and outputs.\n\n  * Does not not necessarily tell us about the true DGP.\n  * Can often inspire questions for further research.\n\n::: {.content-visible when-format=\"revealjs\"}\n. . .\n:::\n\n[Causal]{.caus}: Learn about causal relationships.\n\n  * Try to understand how the box works (the true DGP)\n  * When you change one factor, how does it change the result?\n\n::: {.content-visible when-format=\"revealjs\"}\n. . .\n:::\n\n[Predictive]{.pred}: Be able to guess the value of one variable from other information\n\n  * DGP doesn't matter, create your own box..\n  * Helps us know what's likely to happen in a new situation.\n\n## Difference of Focus\n\n[Description]{.desc}:\n\n  * Focus on showing relationships among a few variables.\n  * **Give up goal of correctly modeling the true DGP**\n\n::: {.content-visible when-format=\"revealjs\"}\n. . .\n:::\n\n[Prediction]{.pred}:\n\n  * Focus on predicting given observed data by any possible means.\n  * **Give up goal of correctly modeling the true DGP**\n\n::: {.content-visible when-format=\"revealjs\"}\n. . .\n:::\n\n[Causal inference]{.caus}:\n\n  * Focus on determining the true direct effect of a treatment variable\n  * Give up goal of understanding causal effects of any other factors\n\n## Impact of selection bias\n\n[Description]{.desc}\n\n  * NO. Only want to infer patterns from observed data.\n\n[**When there are a lot of people wearing shorts, there often is an ice cream truck**]{style=\"color:green;\"}\n\n::: {.content-visible when-format=\"revealjs\"}\n. . .\n:::\n\n[Prediction]{.pred}:\n\n  * NO. Only want to infer patterns from observed data. \n\n[**Given how many people are wearing shorts, will an ice cream truck show up?**]{style=\"color:green;\"}\n\n::: {.content-visible when-format=\"revealjs\"}\n. . .\n:::\n\n[Causal inference]{.caus}:\n\n  * YES. Want to infer the result of active intervention. Must eliminate selection bias to estimate the treatment effect.\n\n[**If someone chooses to wear shorts, will it make an ice cream truck show up?**]{style=\"color:green;\"}\n\n## Difference Interpretation of β~n~\n\n[Description]{.desc}:\n\n* β~n~ represents an association between $X_{n_i}$ and Y~i~.\n* Only a statement about the data, not about the reasons behind the pattern.\n\n::: {.content-visible when-format=\"revealjs\"}\n. . .\n:::\n\n[Prediction]{.pred}: Model does not need to be interpretable.\n\n* Coefficients β~n~ are informative only of predictive power, not causal effects.\n* Model can be treated as a black box.\n\n::: {.content-visible when-format=\"revealjs\"}\n. . .\n:::\n\n[Causal inference]{.caus}:\n\n* β~1~ is a causal effect of x~1~ under stated assumptions (of the identification strategy).\n* Many coefficients generally lack interpretability.\n\n# Consequences\n\n## Consequences\n\nDiscerning which type of goal you have is critical for:\n\n- **Interpreting results**: Mistaking one goal for another can lead your audience to make very bad decisions.\n\n- **Choosing methods**: Distinct approaches are required to achieve different goals.\n\n## Consequences for models\n\n::: {.incremental}\n\nModels for prediction and causal inference differ with respect to the following:\n\n1. The covariates that should be considered for inclusion in (and possibly exclusion from) the model.\n2. How a suitable set of covariates to include in the model is determined.\n3. Which covariates are ultimately selected, and what functional form (i.e. parameterization) they take.\n4. How the model is evaluated.\n5. How the model is interpreted.\n\n:::\n\n## Consequences for methods ?\n\nWhat methods should we use for each goal?\n\n1. [Descriptive analysis]{.desc}\n\n    - Exploratory analysis and regression.\n\n::: {.content-visible when-format=\"revealjs\"}\n. . .\n:::\n\n2. [Causal inference]{.caus}\n\n    - Path analysis\n    - Structural equation modelling\n    - Graph theory\n\n::: {.content-visible when-format=\"revealjs\"}\n. . .\n:::\n\n3. [Prediction]{.pred}\n\n    - Statistical learning / machine learning.\n    - AIC and any kind of model selection\n\n# How to figure it out?\n\n## Confounder\n\n::: panel-tabset\n### Relation\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-3-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n### Adjusted\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-4-1.png){fig-align='center' width=3000}\n:::\n:::\n\n:::\n\n## Mediator\n\n::: panel-tabset\n## Relation\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-5-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n## Adjusted\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-6-1.png){fig-align='center' width=3000}\n:::\n:::\n\n:::\n\n## Collider\n\n::: panel-tabset\n### Relation\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-7-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n### Adjusted\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-8-1.png){fig-align='center' width=3000}\n:::\n:::\n\n:::\n\n## M-bias\n\n::: panel-tabset\n### Relation\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-9-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n### Adjusted\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-10-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n:::\n\n## Butterfly bias\n\n::: panel-tabset\n### Relation\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-11-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n### {a, m}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-12-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n### {b, m}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-13-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n### {a, b, m}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-14-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n:::\n\n## Selection bias\n\n::: panel-tabset\n### Case\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-15-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n### Controlled\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/unnamed-chunk-16-1.png){fig-align='center' width=3000}\n:::\n:::\n\n:::\n\n## More complexity\n\n::: panel-tabset\n## Code\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmy_dag <- dagify(y ~ x + a + b,\n  x ~ a + b,\n  a ~ d,\n  exposure = \"x\",\n  outcome = \"y\"\n)\nmy_dag %>%\n  ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +\n  geom_dag_point() +\n  geom_dag_edges(edge_width = 2) +\n  geom_dag_text(size = 50) +\n  theme_dag()\n```\n:::\n\n\n## Plot\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-05_model_structure_files/figure-revealjs/m_comp-1.png){fig-align='center' width=3000}\n:::\n:::\n\n:::\n\n# Happy modelling\n\n![](assets/img_l5/unicorn.png){fig-align=\"center\"}\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}